programa P5p3
procesos 
  proceso juntarFlores(ES cantF:numero)
  comenzar
    mientras(HayFlorEnLaEsquina)
      tomarFlor
      cantF:=cantF+1
  fin
  proceso irDepo(ES cantF:numero;E termine:boolean;E avR:numero;E caR:numero)
  comenzar
    BloquearEsquina(10,10)
    Pos(10,10)
    repetir cantF
      depositarFlor
    EnviarMensaje(termine,robotC)
    Pos(avR,caR)
    LiberarEsquina(10,10)
    cantF:=0
  fin
areas
  deposito:AreaC(10,10,10,10)
  a1:AreaP(1,3,100,3)
  a2:AreaP(1,4,100,4)
  aC:AreaP(1,5,1,5)
robots
  robot recolector
  variables
    cantF,cantPasos,avR,caR:numero
    termine:boolean
  comenzar
    termine:=F
    cantF:=0
    cantPasos:=0
    derecha
    repetir 99
      juntarFlores(cantF)
      mover
      cantPasos:=cantPasos+1
      si(cantPasos=5)|(cantF=10)
        si(cantPasos=5)
          cantPasos:=0
        avR:=PosAv
        caR:=PosCa
        irDepo(cantF,termine,avR,caR)
    juntarFlores(cantF)
    si(cantPasos=5)|(cantF=10)
      avR:=PosAv
      caR:=PosCa
      irDepo(cantF,termine,avR,caR) 
    termine:=V
    EnviarMensaje(termine,robotC)
  fin
  robot cosechador
  variables 
    cantF,terminaron:numero
    termino:boolean
  comenzar
    cantF:=0
    terminaron:=0
    mientras(terminaron<2)
      RecibirMensaje(termino,*)
      BloquearEsquina(10,10)
      Pos(10,10)
      mientras(HayFlorEnLaEsquina)
        tomarFlor
        cantF:=cantF+1
      Pos(1,5)
      LiberarEsquina(10,10)
      si(termino=V)
        terminaron:=terminaron+1
    Informar(cantF)
  fin
variables
  rec1:recolector
  rec2:recolector
  robotC:cosechador
comenzar
  AsignarArea(rec1,a1)
  AsignarArea(rec1,deposito)
  AsignarArea(rec2,a2)
  AsignarArea(rec2,deposito)
  AsignarArea(robotC,aC)
  AsignarArea(robotC,deposito)
  Iniciar(rec1,1,3)
  Iniciar(rec2,1,4)
  Iniciar(robotC,1,5)
fin